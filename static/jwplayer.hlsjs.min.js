!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.jwplayer_hls_provider=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(){}function e(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function f(){this._events=new d,this._eventsCount=0}var g=Object.prototype.hasOwnProperty,h="~";Object.create&&(d.prototype=Object.create(null),(new d).__proto__||(h=!1)),f.prototype.eventNames=function(){var a,b,c=[];if(0===this._eventsCount)return c;for(b in a=this._events)g.call(a,b)&&c.push(h?b.slice(1):b);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(a)):c},f.prototype.listeners=function(a,b){var c=h?h+a:a,d=this._events[c];if(b)return!!d;if(!d)return[];if(d.fn)return[d.fn];for(var e=0,f=d.length,g=new Array(f);e<f;e++)g[e]=d[e].fn;return g},f.prototype.emit=function(a,b,c,d,e,f){var g=h?h+a:a;if(!this._events[g])return!1;var i,j,k=this._events[g],l=arguments.length;if(k.fn){switch(k.once&&this.removeListener(a,k.fn,void 0,!0),l){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,c),!0;case 4:return k.fn.call(k.context,b,c,d),!0;case 5:return k.fn.call(k.context,b,c,d,e),!0;case 6:return k.fn.call(k.context,b,c,d,e,f),!0}for(j=1,i=new Array(l-1);j<l;j++)i[j-1]=arguments[j];k.fn.apply(k.context,i)}else{var m,n=k.length;for(j=0;j<n;j++)switch(k[j].once&&this.removeListener(a,k[j].fn,void 0,!0),l){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,b);break;case 3:k[j].fn.call(k[j].context,b,c);break;case 4:k[j].fn.call(k[j].context,b,c,d);break;default:if(!i)for(m=1,i=new Array(l-1);m<l;m++)i[m-1]=arguments[m];k[j].fn.apply(k[j].context,i)}}return!0},f.prototype.on=function(a,b,c){var d=new e(b,c||this),f=h?h+a:a;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],d]:this._events[f].push(d):(this._events[f]=d,this._eventsCount++),this},f.prototype.once=function(a,b,c){var d=new e(b,c||this,!0),f=h?h+a:a;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],d]:this._events[f].push(d):(this._events[f]=d,this._eventsCount++),this},f.prototype.removeListener=function(a,b,c,e){var f=h?h+a:a;if(!this._events[f])return this;if(!b)return 0==--this._eventsCount?this._events=new d:delete this._events[f],this;var g=this._events[f];if(g.fn)g.fn!==b||e&&!g.once||c&&g.context!==c||(0==--this._eventsCount?this._events=new d:delete this._events[f]);else{for(var i=0,j=[],k=g.length;i<k;i++)(g[i].fn!==b||e&&!g[i].once||c&&g[i].context!==c)&&j.push(g[i]);j.length?this._events[f]=1===j.length?j[0]:j:0==--this._eventsCount?this._events=new d:delete this._events[f]}return this},f.prototype.removeAllListeners=function(a){var b;return a?(b=h?h+a:a,this._events[b]&&(0==--this._eventsCount?this._events=new d:delete this._events[b])):(this._events=new d,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prototype.setMaxListeners=function(){return this},f.prefixed=h,f.EventEmitter=f,void 0!==b&&(b.exports=f)},{}],2:[function(a,b,c){"use strict";function d(a){function b(a){return function(){}}function c(a){function b(){a.removeEventListener("playing",c),a.removeEventListener("pause",c),a.removeEventListener("abort",c),a.removeEventListener("error",c)}function c(a){b(),"playing"!=a.type&&e('play() was interrupted by a "'+a.type+'" event')}if(a.paused)return void e("video play refused");a.addEventListener("playing",c),a.addEventListener("abort",c),a.addEventListener("error",c),a.addEventListener("pause",c)}function d(){var a=H.play()||c(H);a&&a.catch?a.catch(function(a){e("video_play failed with "+a),console.warn(a),"NotAllowedError"==a.name&&H.hasAttribute("jw-gesture-required")&&(B.trigger("autoplayFailed"),H.setAttribute("autoplay-failed","failed"))}):H.hasAttribute("jw-gesture-required")&&(B.trigger("autoplayFailed"),H.setAttribute("autoplay-failed","failed"))}function e(a){var b;(b=L.debug)&&b.log(a)}function f(){e("hls_play state: "+B.hls_state+" att:"+B.attached),!(B.hls_queued.play="ready"!=B.hls_state)&&B.attached&&(B.hls_restore_pos(),d())}function i(a){a&&("ready"==B.hls_state&&(B.hls_state="idle"),B.level_cb&&D.off(z.Events.LEVEL_LOADED,B.level_cb),B.level_cb=function(){e("hls play queued on level_cb:"+B.hls_queued.play),D.off(z.Events.LEVEL_LOADED,B.level_cb),B.level_cb=void 0,B.hls_state="ready",B.hls_queued.play&&f(),B.trigger(j.JWPLAYER_MEDIA_BUFFER_FULL)},D.on(z.Events.LEVEL_LOADED,B.level_cb),D.loadSource(a),D.media||B.attachMedia())}function k(a){return a&&a.find(function(a){return a.default})||a[0]}function l(a,b){B.hls.holaLog&&B.hls.holaLog[a]&&B.hls.holaLog[a].call(B.hls.holaLog,b)}function m(a){if(B.renderNatively)for(var b=H.textTracks,c=a.tracks[a.track].id,d=0;d<b.length;d++)b[d].mode=b[d]._id==c?"showing":"hidden"}function n(){var a,b,c=H.seekable?H.seekable.length:0;for(b=0,a=0;a<c;a++)b=Math.max(b,H.seekable.end(a));return b}function o(){var a=H.duration,b=n();if(1/0==a&&b){var c=b-H.seekable.start(0);1/0!=c&&c>120&&(a=-c)}return a}function p(){return q()?1/0:o()}function q(){var a,b;try{if(!(b=D.streamController.levels))return;var c=b.find(function(a){return a.details});a=c&&!!c.details.live}catch(a){e("is_live failed with "+a)}return a}function r(){var a=H.buffered,b=H.duration;return!a||!a.length||b<=0||1/0==b?0:Math.min(a.end(a.length-1)/b,1)}function s(a,b,c){a==M&&c==N||(M=a,B.trigger(j.JWPLAYER_MEDIA_BUFFER,{bufferPercent:100*a,position:b,duration:p()}))}function t(){B.setState("complete"),B.trigger(j.JWPLAYER_MEDIA_COMPLETE),B.before_complete=!1}function u(a){if(void 0===a)return"";if(!a)return"0";var b=1024,c=["","K","M","G","T","P"],d=Math.floor(Math.log(a)/Math.log(b));return(a/=Math.pow(b,d))<.001?"0":(a>=b-1&&(a=Math.trunc(a)),a.toFixed(a<1?3:a<10?2:a<100?1:0).replace(/\.0*$/,"")+c[d])}function v(a){return a.height?a.height+"p":a.width?Math.round(9*a.width/16)+"p":a.bitrate?u(a.bitrate)+"bps":0}function w(){var a=D.levels||[],b=[];return a.length>1&&b.push({label:"Auto"}),a.forEach(function(a){b.push({bitrate:a.bitrate,height:a.height,label:v(a),width:a.width})}),b}function x(a){var b=D.levels||[];return a=a||D.currentLevel,{jw:D.manual_level==-1||b.length<2?0:a+1,real:b.length<2?0:a+1}}var y=h.jwplayer||window.jwplayer,z=h.Hls||window.Hls,A=a&&y(a);console.log("init hola/hls provider v"+h.VERSION+" hls v"+z.version+(h.version?" hap v"+h.version:"")),A.provider=this;var B=this;this.hls_restore_pos=function(){var a=this.hls_queued.seek,b=H.currentTime;"STOPPED"==D.streamController.state&&(D.streamController.startPosition=0,D.startLoad(a||0)),a&&(this._in_seek=!0,H.currentTime=a,this.trigger(j.JWPLAYER_MEDIA_SEEK,{position:b,offset:a}),H.readyState||H.dispatchEvent(new Event("seeking")),this.hls_queued.seek=0)},this.events=new g,this.addEventListener=this.on=this.events.on.bind(this.events),this.once=this.events.once.bind(this.events),this.removeEventListener=this.off=this.events.off.bind(this.events),this.trigger=this.emit=function(a){if(B.attached||B.before_complete){var b=[].slice.call(arguments);B.events.emit.apply(this.events,b),"all"!=a&&(b.unshift("all"),B.events.emit.apply(this.events,b))}},this.removeAllListeners=function(a){this.events.removeAllListeners(a)},this.hls_queued={play:!1,seek:0},this.attached=!0,this.hls_state="idle",this.is_mobile=function(){var a,b,c=navigator.userAgent;if((a=/iP(hone|ad|od)/i.test(c))||(b=/Android/i.test(c)))return{is_ios:a,is_android:b}},this.supports_captions=function(){var a=navigator.userAgent;return/(iPhone|iPad|iPod|iPod touch);.*?OS/.test(a)||/ (Chrome|Version)\/\d+(\.\d+)+.* Safari\/\d+(\.\d+)+/.test(a)||/Firefox\/(\d+(?:\.\d+)+)/.test(a)};var C,D,E,F,G=document.getElementById(a),H=G?G.querySelector("video"):void 0,I=this.is_mobile(),J={reason:"initial choice",mode:"auto"};H||(H=document.createElement("video"),I&&H.setAttribute("jw-gesture-required","")),H.className="jw-video jw-reset",H.hola_dm_hls_attached=!0,function(a,b){for(var c=a;c&&!c.hasOwnProperty("src");c=Object.getPrototypeOf(c));if(c){var d=Object.getOwnPropertyDescriptor(c,"src");d.get||d.set||(d.get=function(){var b=a.getAttribute("src");return null!=b?b:""},d.set=function(b){var c=document.createElement("source");c.src=b||"",a.setAttribute("src",c.src)}),Object.defineProperty(a,"src",{configurable:!0,enumerable:!1,set:function(c){b(d.get.call(a),c)&&d.set.call(a,c)},get:d.get})}}(H,function(a,b){return b!=a+"?"});var K,L=h.hls_params||{};this.ad_count=0,A&&(A.on("captionsList",m),A.on("captionsChanged",m),A.on("adImpression",function(){B.ad_count++}),A.on("adComplete",function(){B.ad_count--}),A.on("adSkipped",function(){B.ad_count--}),Object.assign(L,A.hola_config),"undefined"!=L.debug&&(K=L.debug,delete L.debug)),L.debug={},["debug","info","log","warn","error"].forEach(function(a){L.debug[a]=l.bind(null,a)}),this.hls=D=new z(L),D.holaLog=K,A&&(A.hls=D);var M,N,O,P={durationchange:function(){N=o(),s(r(),O,N)},ended:function(){"idle"!=B.state&&"complete"!=B.state&&(B.before_complete=!0,B.trigger(j.JWPLAYER_MEDIA_BEFORECOMPLETE),B.attached&&t())},error:function(){B.trigger(j.JWPLAYER_MEDIA_ERROR,{message:"Error loading media: File could not be played"})},loadstart:function(){H.setAttribute("jw-loaded","started")},loadeddata:function(){H.setAttribute("jw-loaded","data"),B.supports_captions()&&(H.textTracks.onaddtrack=function(){B.renderNatively=!0,B.trigger("subtitlesTracks",{tracks:H.textTracks})},H.textTracks.length&&H.textTracks.onaddtrack())},loadedmetadata:function(){H.muted&&(H.muted=!1,H.muted=!0),H.setAttribute("jw-loaded","meta"),N=o(),B.trigger(j.JWPLAYER_MEDIA_META,{duration:p(),height:H.videoHeight,width:H.videoWidth})},canplay:function(){F=!0,B.trigger(j.JWPLAYER_MEDIA_BUFFER_FULL)},playing:function(){B.setState("playing"),H.hasAttribute("jw-played")||H.setAttribute("jw-played",""),H.hasAttribute("jw-gesture-required")&&(H.removeAttribute("jw-gesture-required"),H.removeAttribute("autoplay-failed")),B.trigger(j.JWPLAYER_PROVIDER_FIRST_FRAME,{})},pause:function(){"complete"!=B.state&&H.currentTime!=H.duration&&B.setState("paused")},seeking:function(){B._in_seek||(B._in_seek=!0,B.trigger(j.JWPLAYER_MEDIA_SEEK,{position:O,offset:H.currentTime}))},seeked:function(){B._in_seek=!1,B.trigger(j.JWPLAYER_MEDIA_SEEKED)},progress:function(){s(r(),O,N)},timeupdate:function(){N=o(),O=N<0?-(n()-H.currentTime):H.currentTime,s(r(),O,N),"playing"==B.state&&B.trigger(j.JWPLAYER_MEDIA_TIME,{position:O,duration:p()})}};for(var Q in P)H.addEventListener(Q,function(a){return function(){B.attached&&P[a]()}}(Q),!1);D.on(z.Events.ERROR,function(a,b){if(b.fatal){var c;switch(b.details){case z.ErrorDetails.MANIFEST_LOAD_ERROR:case z.ErrorDetails.MANIFEST_LOAD_TIMEOUT:c="Cannot load M3U8: "+b.response.statusText;break;default:c="Error loading media: "+b.details}B.trigger(j.JWPLAYER_MEDIA_ERROR,{message:c})}}),D.on(z.Events.MANIFEST_LOADED,function(){B.trigger(j.JWPLAYER_MEDIA_LEVELS,{currentQuality:x().jw,levels:w()});var a,b=0;(a=D.levels)&&(a.forEach(function(a){b+=+!!(a.videoCodec||!a.audioCodec&&(a.bitrate>64e3||a.width||a.height))}),B.trigger(j.JWPLAYER_MEDIA_TYPE,{mediaType:b?"video":"audio"}))}),D.on(z.Events.LEVEL_SWITCH,function(a,b){var c=w(),d=x(b.level);B.trigger(j.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:d.jw,levels:c});var e=c[d.real];J.level=e,J.level.index=d.real,J.level.label=D.manual_level==-1&&c.length>1?"auto":e.label,J.reason=J.reason||"auto",B.trigger("visualQuality",J),J.reason=""}),this.init=function(a){E=!1,H.setAttribute("jw-loaded","init")},this.load=function(a){if(this.attached){var b=k(a.sources).file,c=H.getAttribute("jw-loaded"),e=this.hls_queued,g=H.hasAttribute("jw-played");if(I&&!g||this.setState("loading"),e.seek=Math.max(a.starttime-(e.rw_sec||0),0),"ready"!=this.hls_state||(this.source||"")!=b||["init","started"].includes(c)){E=!1,H.load(),D.stopLoad(D.media&&"ready"==this.hls_state&&"init"==c),i(this.source=b),H.setAttribute("jw-loaded","init")}else f();I&&!g&&(E||I.is_ios&&!F||(E=!0,F=!1,d()),H.paused||"playing"==this.state||this.setState("loading"))}},this.play=function(){f()},this.pause=function(){H.pause(),B.setState("paused")},this.stop=function(){D.stopLoad(),B.setState("idle")},this.volume=function(a){H.volume=Math.min(a/100,1)},this.mute=function(a){H.muted=!!a},this.seek=function(a){if(this._in_seek=!0,"ready"==this.hls_state){var b=H.currentTime;H.currentTime=a,this.trigger(j.JWPLAYER_MEDIA_SEEK,{position:b,offset:a})}else this.hls_queued.seek=a},this.resize=function(a,b,c){},this.remove=function(){this.in_container=!1,D.stopLoad(),this.source=void 0,C===H.parentNode&&C.removeChild(H)},this.destroy=function(){for(var a in P)H.removeEventListener(a,P[a],!1);this.removeAllListeners()},this.setVisibility=function(a){C.style.visibility=a?"visible":"",C.style.opacity=a?1:0},this.setFullscreen=function(){return!1},this.getFullscreen=b("getFullscreen"),this.getContainer=function(){return C},this.setContainer=function(a){C=a,C.appendChild(H),this.in_container=!0},D.manual_level=-1,this.setCurrentQuality=function(a){a!=D.manual_level+1&&(D.manual_level=a-1,D.hola_adaptive||(D.loadLevel=D.manual_level),B.trigger(j.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:a,levels:w()}),J.reason="api")},this.getName=function(){return{name:"hola/hls"}},this.get_position=function(){return H.currentTime},this.getQualityLevels=function(){return w()},this.getCurrentQuality=function(){return x(D.loadLevel).jw},this.getAudioTracks=b("getAudioTracks"),this.getCurrentAudioTrack=b("getCurrentAudioTrack"),this.setCurrentAudioTrack=b("setCurrentAudioTrack"),this.checkComplete=function(){return!!this.before_complete},this.setControls=b("setControls"),this.attachMedia=function(){if(this.before_complete)return t();this.ad_count&&e("jwprovider attach inside ad "+this.ad_count),this.attached=!0,D.attachMedia(H)},this.detachMedia=function(){return D.trigger(z.Events.BUFFER_RESET),D.detachMedia(),this.level_cb&&(D.off(z.Events.LEVEL_LOADED,this.level_cb),this.level_cb=void 0),delete D.bufferController.segments,this.attached=!1,H},this.setState=function(a){var b=this.state||"idle";this.state=a,a!=b&&this.trigger(j.JWPLAYER_PLAYER_STATE,{newstate:a})},this.sendMediaType=function(a){var b=["oga","aac","mp3","mpeg","vorbis"].includes(a[0].type);this.trigger(j.JWPLAYER_MEDIA_TYPE,{mediaType:b?"audio":"video"})}}function e(){for(var a,b=h.jwplayer||window.jwplayer,c=0,d=[];(a=b(c++))&&a.pause;)d.push(a);return d}function f(a){return"hls"==a.type||(a.file||"").match(/\.m3u8$/)}var g=a("eventemitter3"),h=b.exports=d,i=!1,j={JWPLAYER_MEDIA_BEFORECOMPLETE:"beforeComplete",JWPLAYER_MEDIA_BUFFER:"bufferChange",JWPLAYER_MEDIA_BUFFER_FULL:"bufferFull",JWPLAYER_MEDIA_COMPLETE:"complete",JWPLAYER_MEDIA_ERROR:"mediaError",JWPLAYER_MEDIA_LEVELS:"levels",JWPLAYER_MEDIA_LEVEL_CHANGED:"levelsChanged",JWPLAYER_MEDIA_META:"meta",JWPLAYER_MEDIA_SEEK:"seek",JWPLAYER_MEDIA_SEEKED:"seeked",JWPLAYER_MEDIA_TIME:"time",JWPLAYER_MEDIA_TYPE:"mediaType",JWPLAYER_PLAYER_STATE:"state",JWPLAYER_PROVIDER_FIRST_FRAME:"providerFirstFrame"};h.getName=function(){return{name:"hola/hls"}},h.supports=function(a){var b=h.Hls||window.Hls;return!e().every(function(b){var c=b.getPlaylist();return(c.every?c:[{sources:[c]}]).every(function(b){return(b.allSources||b.sources||[{file:b.file}]).every(function(b){return b.file!=a.file})})})&&!h.disabled&&f(a)&&b&&b.isSupported()},h.attach=function(){var a=h.jwplayer||window.jwplayer;h.disabled=!1,i||(i=!0,a.api.registerProvider(this))},h.detach=function(a){h.disabled=!0,a&&a.attached&&(a.setState("idle"),a.detachMedia())},h.reload_jwplayer_instances=function(){e().forEach(function(a){var b=a.getConfig();if(b){if(b.advertising&&!b.advertising.client&&b.plugins)for(var c in b.plugins)if(b.plugins[c]===b.advertising){var d=c.match(/\/(\w+)\.js$/);b.advertising.client=d&&d[1];break}a.setup(b)}})},h.VERSION="0.0.79"},{eventemitter3:1}]},{},[2])(2)});
//# sourceMappingURL=jwplayer.hlsjs.min.js.map